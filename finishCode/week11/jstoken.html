
<style>
  .keywords {
    color: blue;
  }
  .whitespace {
    color: #999;
  }
  .indentifier {
    color: green;
  }
  .punctuator {
    color: greenyellow;
  }
</style>
<pre id="container"></pre>
<script>
  var source = `function sleep(t) {
      return new Promise((resolve, reject) => {
        setTimeout(resolve,t)
      })
    }`
  var reg = /(function|new|return)|([ \t\n\r]+)|([a-zA-Z][a-zA-Z0-9]*)|([\(\)\{\}\,\;])/g

  var dic = ['keywords','whitespace','indentifier','punctuator']
  var token = null
  let lastIndex = 0
  const container = document.getElementById('container')
  do {
    lastIndex = reg.lastIndex
    token = reg.exec(source)
    console.log(reg.lastIndex)
    console.log(token[0])
    let text = document.createElement('span')
    text.textContent = token[0]

    for (let i = 1; i < 5; i++) {
      if(token[i]){
        text.classList.add(dic[i - 1])
      }
    }
    container.appendChild(text)
  } while(token && reg.lastIndex > lastIndex)
</script>